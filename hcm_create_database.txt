CREATE DATABASE IF NOT EXISTS hofcapellmeister;

USE hofcapellmeister;

CREATE TABLE IF NOT EXISTS playlist (
	pl_id INT PRIMARY KEY,
	pl_name VARCHAR(100) NOT NULL
	);

CREATE TABLE IF NOT EXISTS track (
	tr_id INT PRIMARY KEY,
	tr_name VARCHAR(100) NOT NULL
	);

CREATE TABLE IF NOT EXISTS artist (
	art_id INT PRIMARY KEY,
	art_name VARCHAR(100) NOT NULL
	);

CREATE TABLE IF NOT EXISTS event (
	ev_id INT AUTO_INCREMENT PRIMARY KEY,
	ev_name VARCHAR(100) NOT NULL,
	ev_date DATE NOT NULL,
	ev_location VARCHAR(100) NOT NULL,
	UNIQUE(ev_name, ev_date, ev_location)
	);

CREATE TABLE IF NOT EXISTS art_ev (
	art_id INT,
	ev_id INT,
	PRIMARY KEY(art_id, ev_id),
	FOREIGN KEY(art_id) REFERENCES artist(art_id),
	FOREIGN KEY(ev_id) REFERENCES event(ev_id)
	);

CREATE TABLE IF NOT EXISTS art_tr (
	art_id INT,
	tr_id INT,
	PRIMARY KEY(art_id, tr_id),
	FOREIGN KEY(art_id) REFERENCES artist(art_id),
	FOREIGN KEY(tr_id) REFERENCES track(tr_id)
	);

CREATE TABLE IF NOT EXISTS pl_tr (
	pl_id INT,
	tr_id INT,
	PRIMARY KEY(pl_id, tr_id),
	FOREIGN KEY(pl_id) REFERENCES playlist(pl_id),
	FOREIGN KEY(tr_id) REFERENCES track(tr_id)
	);